{"version":3,"sources":["../../../../../src/hoverMap/utils/pagejs/create_page.js"],"names":["module","exports","createPage","pathtoRegexp","require","clickEvent","document","ontouchstart","location","window","history","dispatch","decodeURLComponents","base","running","hashbang","prevContext","page","path","fn","route","Route","i","arguments","length","callbacks","push","middleware","start","exits","current","len","options","popstate","addEventListener","onpopstate","click","onclick","url","hash","indexOf","substr","search","pathname","replace","stop","removeEventListener","show","state","ctx","Context","handled","pushState","back","setTimeout","redirect","from","to","e","init","save","prev","j","nextExit","nextEnter","unhandled","canonicalPath","href","exit","decodeURLEncodedURIComponent","val","decodeURIComponent","title","querystring","slice","params","parts","split","prototype","replaceState","method","regexp","keys","sensitive","strict","self","next","match","qsIndex","m","exec","key","undefined","hasOwnProperty","call","name","loaded","readyState","which","metaKey","ctrlKey","shiftKey","defaultPrevented","el","target","nodeName","parentNode","hasAttribute","getAttribute","link","sameOrigin","process","orig","preventDefault","event","button","origin","protocol","hostname","port"],"mappings":"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","file":"create_page.js","sourcesContent":["  /* globals require, module */\n\n  'use strict';\n\n  /**\n   * Module exports.\n   */\n\n  module.exports = function createPage() {\n\n    /**\n     * Module dependencies.\n     */\n\n    var pathtoRegexp = require('path-to-regexp');\n\n\n    /**\n     * Detect click event\n     */\n    var clickEvent = ('undefined' !== typeof document) && document.ontouchstart ? 'touchstart' : 'click';\n\n    /**\n     * To work properly with the URL\n     * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n     */\n\n    var location = ('undefined' !== typeof window) && (window.history.location || window.location);\n\n    /**\n     * Perform initial dispatch.\n     */\n\n    var dispatch = true;\n\n\n    /**\n     * Decode URL components (query string, pathname, hash).\n     * Accommodates both regular percent encoding and x-www-form-urlencoded format.\n     */\n    var decodeURLComponents = true;\n\n    /**\n     * Base path.\n     */\n\n    var base = '';\n\n    /**\n     * Running flag.\n     */\n\n    var running;\n\n    /**\n     * HashBang option\n     */\n\n    var hashbang = false;\n\n    /**\n     * Previous context, for capturing\n     * page exit events.\n     */\n\n    var prevContext;\n\n    /**\n     * Register `path` with callback `fn()`,\n     * or route `path`, or redirection,\n     * or `page.start()`.\n     *\n     *   page(fn);\n     *   page('*', fn);\n     *   page('/user/:id', load, user);\n     *   page('/user/' + user.id, { some: 'thing' });\n     *   page('/user/' + user.id);\n     *   page('/from', '/to')\n     *   page();\n     *\n     * @param {String|Function} path\n     * @param {Function} fn...\n     * @api public\n     */\n\n    function page(path, fn) {\n      // <callback>\n      if ('function' === typeof path) {\n        return page('*', path);\n      }\n\n      // route <path> to <callback ...>\n      if ('function' === typeof fn) {\n        var route = new Route(path);\n        for (var i = 1; i < arguments.length; ++i) {\n          page.callbacks.push(route.middleware(arguments[i]));\n        }\n        // show <path> with [state]\n      } else if ('string' === typeof path) {\n        page['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n        // start [options]\n      } else {\n        page.start(path);\n      }\n    }\n\n    /**\n     * Callback functions.\n     */\n\n    page.callbacks = [];\n    page.exits = [];\n\n    /**\n     * Current path being processed\n     * @type {String}\n     */\n    page.current = '';\n\n    /**\n     * Number of pages navigated to.\n     * @type {number}\n     *\n     *     page.len == 0;\n     *     page('/login');\n     *     page.len == 1;\n     */\n\n    page.len = 0;\n\n    /**\n     * Get or set basepath to `path`.\n     *\n     * @param {String} path\n     * @api public\n     */\n\n    page.base = function(path) {\n      if (0 === arguments.length) return base;\n      base = path;\n    };\n\n    /**\n     * Bind with the given `options`.\n     *\n     * Options:\n     *\n     *    - `click` bind to click events [true]\n     *    - `popstate` bind to popstate [true]\n     *    - `dispatch` perform initial dispatch [true]\n     *\n     * @param {Object} options\n     * @api public\n     */\n\n    page.start = function(options) {\n      options = options || {};\n      if (running) return;\n      running = true;\n      if (false === options.dispatch) dispatch = false;\n      if (false === options.decodeURLComponents) decodeURLComponents = false;\n      if (false !== options.popstate) window.addEventListener('popstate', onpopstate, false);\n      if (false !== options.click) {\n        document.addEventListener(clickEvent, onclick, false);\n      }\n      if (true === options.hashbang) hashbang = true;\n      if (!dispatch) return;\n      var url = (hashbang && ~location.hash.indexOf('#!')) ? location.hash.substr(2) + location.search : location.pathname + location.search + location.hash;\n      page.replace(url, null, true, dispatch);\n    };\n\n    /**\n     * Unbind click and popstate event handlers.\n     *\n     * @api public\n     */\n\n    page.stop = function() {\n      if (!running) return;\n      page.current = '';\n      page.len = 0;\n      running = false;\n      if (typeof document !== 'undefined') {\n        document.removeEventListener(clickEvent, onclick, false);\n      }\n\n      if (typeof window !== 'undefined') {\n        window.removeEventListener('popstate', onpopstate, false);\n      }\n    };\n\n    /**\n     * Show `path` with optional `state` object.\n     *\n     * @param {String} path\n     * @param {Object} state\n     * @param {Boolean} dispatch\n     * @return {Context}\n     * @api public\n     */\n\n    page.show = function(path, state, dispatch, push) {\n      var ctx = new Context(path, state);\n      page.current = ctx.path;\n      if (false !== dispatch) page.dispatch(ctx);\n      if (false !== ctx.handled && false !== push) ctx.pushState();\n      return ctx;\n    };\n\n    /**\n     * Goes back in the history\n     * Back should always let the current route push state and then go back.\n     *\n     * @param {String} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n     * @param {Object} [state]\n     * @api public\n     */\n\n    page.back = function(path, state) {\n      if (page.len > 0) {\n        // this may need more testing to see if all browsers\n        // wait for the next tick to go back in history\n        history.back();\n        page.len--;\n      } else if (path) {\n        setTimeout(function() {\n          page.show(path, state);\n        });\n      }else{\n        setTimeout(function() {\n          page.show(base, state);\n        });\n      }\n    };\n\n\n    /**\n     * Register route to redirect from one path to other\n     * or just redirect to another route\n     *\n     * @param {String} from - if param 'to' is undefined redirects to 'from'\n     * @param {String} [to]\n     * @api public\n     */\n    page.redirect = function(from, to) {\n      // Define route from a path to another\n      if ('string' === typeof from && 'string' === typeof to) {\n        page(from, function(e) {\n          setTimeout(function() {\n            page.replace(to);\n          }, 0);\n        });\n      }\n\n      // Wait for the push state and replace it with another\n      if ('string' === typeof from && 'undefined' === typeof to) {\n        setTimeout(function() {\n          page.replace(from);\n        }, 0);\n      }\n    };\n\n    /**\n     * Replace `path` with optional `state` object.\n     *\n     * @param {String} path\n     * @param {Object} state\n     * @return {Context}\n     * @api public\n     */\n\n\n    page.replace = function(path, state, init, dispatch) {\n      var ctx = new Context(path, state);\n      page.current = ctx.path;\n      ctx.init = init;\n      ctx.save(); // save before dispatching, which may redirect\n      if (false !== dispatch) page.dispatch(ctx);\n      return ctx;\n    };\n\n    /**\n     * Dispatch the given `ctx`.\n     *\n     * @param {Object} ctx\n     * @api private\n     */\n\n    page.dispatch = function(ctx) {\n      var prev = prevContext,\n        i = 0,\n        j = 0;\n\n      prevContext = ctx;\n\n      function nextExit() {\n        var fn = page.exits[j++];\n        if (!fn) return nextEnter();\n        fn(prev, nextExit);\n      }\n\n      function nextEnter() {\n        var fn = page.callbacks[i++];\n\n        if (ctx.path !== page.current) {\n          ctx.handled = false;\n          return;\n        }\n        if (!fn) return unhandled(ctx);\n        fn(ctx, nextEnter);\n      }\n\n      if (prev) {\n        nextExit();\n      } else {\n        nextEnter();\n      }\n    };\n\n    /**\n     * Unhandled `ctx`. When it's not the initial\n     * popstate then redirect. If you wish to handle\n     * 404s on your own use `page('*', callback)`.\n     *\n     * @param {Context} ctx\n     * @api private\n     */\n\n    function unhandled(ctx) {\n      if (ctx.handled) return;\n      var current;\n\n      if (hashbang) {\n        current = base + location.hash.replace('#!', '');\n      } else {\n        current = location.pathname + location.search;\n      }\n\n      if (current === ctx.canonicalPath) return;\n      page.stop();\n      ctx.handled = false;\n\n      if (typeof location !== 'undefined' && location.href) {\n        location.href = ctx.canonicalPath;\n      }\n    }\n\n    /**\n     * Register an exit route on `path` with\n     * callback `fn()`, which will be called\n     * on the previous context when a new\n     * page is visited.\n     */\n    page.exit = function(path, fn) {\n      if (typeof path === 'function') {\n        return page.exit('*', path);\n      }\n\n      var route = new Route(path);\n      for (var i = 1; i < arguments.length; ++i) {\n        page.exits.push(route.middleware(arguments[i]));\n      }\n    };\n\n    /**\n     * Remove URL encoding from the given `str`.\n     * Accommodates whitespace in both x-www-form-urlencoded\n     * and regular percent-encoded form.\n     *\n     * @param {str} URL component to decode\n     */\n    function decodeURLEncodedURIComponent(val) {\n      if (typeof val !== 'string') { return val; }\n      return decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n    }\n\n    /**\n     * Initialize a new \"request\" `Context`\n     * with the given `path` and optional initial `state`.\n     *\n     * @param {String} path\n     * @param {Object} state\n     * @api public\n     */\n\n    function Context(path, state) {\n      if ('/' === path[0] && 0 !== path.indexOf(base)) path = base + (hashbang ? '#!' : '') + path;\n      var i = path.indexOf('?');\n\n      this.canonicalPath = path;\n      this.path = path.replace(base, '') || '/';\n      if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n      if (typeof document !== 'undefined') {\n        this.title = document.title;\n      }\n\n      this.state = state || {};\n      this.state.path = path;\n      this.querystring = ~i ? decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n      this.pathname = decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n      this.params = {};\n\n      // fragment\n      this.hash = '';\n      if (!hashbang) {\n        if (!~this.path.indexOf('#')) return;\n        var parts = this.path.split('#');\n        this.path = parts[0];\n        this.hash = decodeURLEncodedURIComponent(parts[1]) || '';\n        this.querystring = this.querystring.split('#')[0];\n      }\n    }\n\n    /**\n     * Expose `Context`.\n     */\n\n    page.Context = Context;\n\n    /**\n     * Push state.\n     *\n     * @api private\n     */\n\n    Context.prototype.pushState = function() {\n      page.len++;\n      if (typeof history !== 'undefined') {\n        history.pushState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n      }\n    };\n\n    /**\n     * Save the context state.\n     *\n     * @api public\n     */\n\n    Context.prototype.save = function() {\n      history.replaceState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    };\n\n    /**\n     * Initialize `Route` with the given HTTP `path`,\n     * and an array of `callbacks` and `options`.\n     *\n     * Options:\n     *\n     *   - `sensitive`    enable case-sensitive routes\n     *   - `strict`       enable strict matching for trailing slashes\n     *\n     * @param {String} path\n     * @param {Object} options.\n     * @api private\n     */\n\n    function Route(path, options) {\n      options = options || {};\n      this.path = (path === '*') ? '(.*)' : path;\n      this.method = 'GET';\n      this.regexp = pathtoRegexp(this.path,\n        this.keys = [],\n        options.sensitive,\n        options.strict);\n    }\n\n    /**\n     * Expose `Route`.\n     */\n\n    page.Route = Route;\n\n    /**\n     * Return route middleware with\n     * the given callback `fn()`.\n     *\n     * @param {Function} fn\n     * @return {Function}\n     * @api public\n     */\n\n    Route.prototype.middleware = function(fn) {\n      var self = this;\n      return function(ctx, next) {\n        if (self.match(ctx.path, ctx.params)) return fn(ctx, next);\n        next();\n      };\n    };\n\n    /**\n     * Check if this route matches `path`, if so\n     * populate `params`.\n     *\n     * @param {String} path\n     * @param {Object} params\n     * @return {Boolean}\n     * @api private\n     */\n\n    Route.prototype.match = function(path, params) {\n      var keys = this.keys,\n        qsIndex = path.indexOf('?'),\n        pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n        m = this.regexp.exec(decodeURIComponent(pathname));\n\n      if (!m) return false;\n\n      for (var i = 1, len = m.length; i < len; ++i) {\n        var key = keys[i - 1];\n        var val = decodeURLEncodedURIComponent(m[i]);\n        if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n          params[key.name] = val;\n        }\n      }\n\n      return true;\n    };\n\n\n    /**\n     * Handle \"populate\" events.\n     */\n\n    var onpopstate = (function () {\n      var loaded = false;\n      if ('undefined' === typeof window) {\n        return;\n      }\n      if (document.readyState === 'complete') {\n        loaded = true;\n      } else {\n        window.addEventListener('load', function() {\n          setTimeout(function() {\n            loaded = true;\n          }, 0);\n        });\n      }\n      return function onpopstate(e) {\n        if (!loaded) return;\n        if (e.state) {\n          var path = e.state.path;\n          page.replace(path, e.state);\n        } else {\n          page.show(location.pathname + location.hash, undefined, undefined, false);\n        }\n      };\n    })();\n    /**\n     * Handle \"click\" events.\n     */\n\n    function onclick(e) {\n\n      if (1 !== which(e)) return;\n\n      if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n      if (e.defaultPrevented) return;\n\n\n\n      // ensure link\n      var el = e.target;\n      while (el && 'A' !== el.nodeName) el = el.parentNode;\n      if (!el || 'A' !== el.nodeName) return;\n\n\n\n      // Ignore if tag has\n      // 1. \"download\" attribute\n      // 2. rel=\"external\" attribute\n      if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n      // ensure non-hash for the same path\n      var link = el.getAttribute('href');\n      if (!hashbang && el.pathname === location.pathname && (el.hash || '#' === link)) return;\n\n\n\n      // Check for mailto: in the href\n      if (link && link.indexOf('mailto:') > -1) return;\n\n      // check target\n      if (el.target) return;\n\n      // x-origin\n      if (!sameOrigin(el.href)) return;\n\n\n\n      // rebuild path\n      var path = el.pathname + el.search + (el.hash || '');\n\n      // strip leading \"/[drive letter]:\" on NW.js on Windows\n      if (typeof process !== 'undefined' && path.match(/^\\/[a-zA-Z]:\\//)) {\n        path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n      }\n\n      // same page\n      var orig = path;\n\n      if (path.indexOf(base) === 0) {\n        path = path.substr(base.length);\n      }\n\n      if (hashbang) path = path.replace('#!', '');\n\n      if (base && orig === path) return;\n\n      e.preventDefault();\n      page.show(orig);\n    }\n\n    /**\n     * Event button.\n     */\n\n    function which(e) {\n      e = e || window.event;\n      return null === e.which ? e.button : e.which;\n    }\n\n    /**\n     * Check if `href` is the same origin.\n     */\n\n    function sameOrigin(href) {\n      var origin = location.protocol + '//' + location.hostname;\n      if (location.port) origin += ':' + location.port;\n      return (href && (0 === href.indexOf(origin)));\n    }\n\n    page.sameOrigin = sameOrigin;\n\n    return page;\n}\n"]}